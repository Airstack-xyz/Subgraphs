specVersion: 0.0.4
schema:
    file: ./schema.graphql
dataSources:
    - kind: ethereum
      name: ENSRegistry
      network: mainnet
      source:
          address: "0x314159265dd8dbb310642f98f50c066173c1259b"
          abi: ENSRegistry
          startBlock: 3327417
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.6
          language: wasm/assemblyscript
          entities:
              - Transfer
              - NewOwner
              - NewResolver
              - NewTTL
          abis:
              - name: ENSRegistry
                file: ./abis/ENSRegistry.json
          eventHandlers:
              - event: Transfer(indexed bytes32,address)
                handler: handleTransfer
              - event: NewOwner(indexed bytes32,indexed bytes32,address)
                handler: handleNewOwner
              - event: NewResolver(indexed bytes32,address)
                handler: handleNewResolver
              - event: NewTTL(indexed bytes32,uint64)
                handler: handleNewTTL
          file: ./src/ens-registry.ts
    - kind: ethereum
      name: RegistrarOld1
      network: mainnet
      source:
          address: "0x012233B3C8177F0778d910ED88170b82DE3bfe57"
          abi: Registrar
          startBlock: 3330177
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.6
          language: wasm/assemblyscript
          entities:
              - AirDomainRegistration
          abis:
              - name: Registrar
                file: ./abis/Registrar.json
          eventHandlers:
              - event: HashRegistered(indexed bytes32,indexed address,uint256,uint256)
                handler: handleHashRegistered1
          file: ./src/registrar.ts
    - kind: ethereum
      name: RegistrarOld2
      network: mainnet
      source:
          address: "0x6090A6e47849629b7245Dfa1Ca21D94cd15878Ef"
          abi: Registrar
          startBlock: 3605331
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.6
          language: wasm/assemblyscript
          entities:
              - AirDomainRegistration
          abis:
              - name: Registrar
                file: ./abis/Registrar.json
          eventHandlers:
              - event: HashRegistered(indexed bytes32,indexed address,uint256,uint256)
                handler: handleHashRegistered2
          file: ./src/registrar.ts
    - kind: ethereum
      name: BaseRegistrarImplementation
      network: mainnet
      source:
          address: "0xFaC7BEA255a6990f749363002136aF6556b31e04"
          abi: BaseRegistrarImplementation
          startBlock: 7666399
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.6
          language: wasm/assemblyscript
          entities:
              - ControllerAdded
              - ControllerRemoved
              - NameMigrated
              - NameRegistered
              - NameRenewed
              - OwnershipTransferred
              - Transfer
          abis:
              - name: BaseRegistrarImplementation
                file: ./abis/BaseRegistrarImplementation.json
          eventHandlers:
              - event: ControllerAdded(indexed address)
                handler: handleControllerAdded
              - event: ControllerRemoved(indexed address)
                handler: handleControllerRemoved
              - event: NameRegistered(indexed uint256,indexed address,uint256)
                handler: handleNameRegistered
              - event: NameRenewed(indexed uint256,uint256)
                handler: handleNameRenewed
              - event: Transfer(indexed address,indexed address,indexed uint256)
                handler: handleTransfer
          file: ./src/base-registrar-implementation.ts
templates:
    - name: ETHRegistrarController
      kind: ethereum/contract
      network: mainnet
      source:
          abi: ETHRegistrarController
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.6
          language: wasm/assemblyscript
          entities:
              - NameRegistered
              - NameRenewed
          abis:
              - name: ETHRegistrarController
                file: ./abis/ETHRegistrarController.json
          eventHandlers:
              - event: NameRegistered(string,indexed bytes32,indexed address,uint256,uint256)
                handler: handleNameRegistered
              - event: NameRenewed(string,indexed bytes32,uint256,uint256)
                handler: handleNameRenewed

          file: ./src/eth-registrar-controller.ts
